<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Second Brain - Your personal productivity and memory assistant">
    <meta name="theme-color" content="#3b82f6">
    
    <title>Second Brain - Personal Memory App</title>
    
    <!-- Styles -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/themes.css') }}">
</head>
<body>
    <nav class="navbar">
        <div class="nav-brand">
            <h1>ðŸ§  Second Brain</h1>
        </div>
        <div class="nav-links">
            <a href="{{ url_for('index') }}" class="nav-link {% if request.endpoint == 'index' %}active{% endif %}">Dashboard</a>
            <a href="{{ url_for('tasks') }}" class="nav-link {% if request.endpoint == 'tasks' %}active{% endif %}">Tasks</a>
            <a href="{{ url_for('notes') }}" class="nav-link {% if request.endpoint == 'notes' %}active{% endif %}">Notes</a>
            <a href="{{ url_for('habits') }}" class="nav-link {% if request.endpoint == 'habits' %}active{% endif %}">Habits</a>
            <a href="{{ url_for('logs') }}" class="nav-link {% if request.endpoint == 'logs' %}active{% endif %}">Logs</a>
            <a href="{{ url_for('search') }}" class="nav-link {% if request.endpoint == 'search' %}active{% endif %}">Search</a>
            <a href="{{ url_for('export_data') }}" class="nav-link {% if request.endpoint == 'export_data' %}active{% endif %}">Export</a>
        </div>
        <button id="themeToggle" class="theme-toggle">ðŸŒ“</button>
    </nav>

    <main class="container">
        {% block content %}{% endblock %}
    </main>

    <!-- Floating Action Button -->
    <button id="fab" class="fab">+</button>

    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    {% block scripts %}{% endblock %}
    
    <!-- COMPLETELY DISABLE SERVICE WORKER FOR DEVELOPMENT -->
    <script>
        // Completely disable service worker
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.getRegistrations().then(function(registrations) {
                for(let registration of registrations) {
                    console.log('Unregistering service worker:', registration);
                    registration.unregister();
                }
                // Clear all caches
                caches.keys().then(function(cacheNames) {
                    cacheNames.forEach(function(cacheName) {
                        caches.delete(cacheName);
                    });
                });
            });
        }
        
        // Remove offline indicator if it exists
        const offlineIndicator = document.getElementById('offlineIndicator');
        if (offlineIndicator) {
            offlineIndicator.remove();
        }
    </script>
</body>
</html>